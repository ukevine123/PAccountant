@using Application.DTO
@using Application.Interface
@inject ILiabilityService LiabilityService
@inject ISnackbar Snackbar

<MudDialog>
    <DialogContent>
        <EditForm Model="Model" OnValidSubmit="onValidSubmit">
            <DataAnnotationsValidator />
            <MudTextField Label="Name" @bind-Value="Model.Name" />
            <MudTextField Label="Type" @bind-Value="Model.Type" />
            <MudTextField Label="Value" @bind-Value="Model.Value" />
            <MudButton Class="mt-4" ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" FullWidth="true">Add Liability</MudButton>
        </EditForm>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance DialogInstance { get; set; }
    private LiabilityCreateDTO Model { get; set; } = new();

    private async Task onValidSubmit()
    {
        await LiabilityService.CreateLiabilityAsync(Model);
        Snackbar.Add("Created!", Severity.Success);
        DialogInstance.Close(DialogResult.Ok(true));
    }
}